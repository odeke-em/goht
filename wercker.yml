box: wercker/golang
build:
    steps:
    - script:
        name: echo golang information
        code: |
            echo "Version information: $(go version)"
    - script:
        name: installation
        code: |
            export PROJPATH=$GOPATH/src/github.com/odeke-em
            mkdir -p $PROJPATH
            START_DIR=$(pwd)
            cd $PROJPATH
            git clone https://github.com/odeke-em/goht.git

            # if [ ! -d ./goht ]
            # then
            #     git clone git@github.com:odeke-em/goht
            # fi
            
            cd goht # Main project dir
            echo $(find . -maxdepth 1 -type d -regex "./[^.]*")
            for i in $(find . -maxdepth 1 -type d -regex "./[^.]*");do  echo "Going into $i";cd $i;go install;go test;cd ../;done

            cd $START_DIR
